!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):e.jQuery)}(this,(function(e){"use strict";function t(e){var t,o,i,s,n,r,a,p={};for(a=0,r=(n=e.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,",").split(",")).length;r>a&&(-1===(o=n[a]).search(/^(http|https|ftp):\/\//)&&-1!==o.search(":"));a++)t=o.indexOf(":"),i=o.substring(0,t),(s=o.substring(t+1))||(s=void 0),"string"==typeof s&&(s="true"===s||"false"!==s&&s),"string"==typeof s&&(s=isNaN(s)?s:+s),p[i]=s;return null==i&&null==s?e:p}function o(o,i,n){if(this.$element=e(o),"string"==typeof i&&(i=t(i)),n?"string"==typeof n&&(n=t(n)):n={},"string"==typeof i)i=i.replace(/\.\w*$/,"");else if("object"==typeof i)for(var r in i)i.hasOwnProperty(r)&&(i[r]=i[r].replace(/\.\w*$/,""));this.settings=e.extend({},s,n),this.path=i,this.init()}var i="vide",s={volume:1,playbackRate:1,muted:!0,loop:!0,autoplay:!0,position:"50% 50%",posterType:"detect",resizing:!0};o.prototype.init=function(){var t,o=this,s=function(e){var t,o,i,s=(e=""+e).split(/\s+/),n="50%",r="50%";for(i=0,t=s.length;t>i;i++)"left"===(o=s[i])?n="0%":"right"===o?n="100%":"top"===o?r="0%":"bottom"===o?r="100%":"center"===o?0===i?n="50%":r="50%":0===i?n=o:r=o;return{x:n,y:r}}(o.settings.position),n="";o.$wrapper=e("<div>").css({position:"absolute","z-index":-1,top:0,left:0,bottom:0,right:0,overflow:"hidden","-webkit-background-size":"cover","-moz-background-size":"cover","-o-background-size":"cover","background-size":"cover","background-repeat":"no-repeat","background-position":s.x+" "+s.y}),t=o.path,"object"==typeof o.path&&(o.path.poster?t=o.path.poster:o.path.mp4?t=o.path.mp4:o.path.webm?t=o.path.webm:o.path.ogv&&(t=o.path.ogv)),"detect"===o.settings.posterType?function(t,o){var i=function(){o(this.src)};e('<img src="'+t+'.gif">').load(i),e('<img src="'+t+'.gif">').load(i),e('<img src="'+t+'.jpeg">').load(i),e('<img src="'+t+'.png">').load(i)}(t,(function(e){o.$wrapper.css("background-image","url("+e+")")})):"none"!==o.settings.posterType&&o.$wrapper.css("background-image","url("+t+"."+o.settings.posterType+")"),"static"===o.$element.css("position")&&o.$element.css("position","relative"),o.$element.prepend(o.$wrapper),"object"==typeof o.path?(o.path.mp4&&(n+='<source src="'+o.path.mp4+'.mp4" type="video/mp4">'),o.path.webm&&(n+='<source src="'+o.path.webm+'.webm" type="video/webm">'),o.path.ogv&&(n+='<source src="'+o.path.ogv+'.ogv" type="video/ogv">'),o.$video=e("<video>"+n+"</video>")):o.$video=e('<video><source src="'+o.path+'.mp4" type="video/mp4"><source src="'+o.path+'.webm" type="video/webm"><source src="'+o.path+'.ogv" type="video/ogg"></video>'),o.$video.prop({autoplay:o.settings.autoplay,loop:o.settings.loop,volume:o.settings.volume,muted:o.settings.muted,defaultMuted:o.settings.muted,playbackRate:o.settings.playbackRate,defaultPlaybackRate:o.settings.playbackRate}).css({margin:"auto",position:"absolute","z-index":-1,top:s.y,left:s.x,"-webkit-transform":"translate(-"+s.x+", -"+s.y+")","-ms-transform":"translate(-"+s.x+", -"+s.y+")","-moz-transform":"translate(-"+s.x+", -"+s.y+")",transform:"translate(-"+s.x+", -"+s.y+")",visibility:"hidden"}).one("canplaythrough."+i,(function(){o.resize()})).one("playing."+i,(function(){o.$video.css("visibility","visible"),o.$wrapper.css("background-image","none")})),o.$element.on("resize."+i,(function(){o.settings.resizing&&o.resize()})),o.$wrapper.append(o.$video)},o.prototype.getVideoObject=function(){return this.$video[0]},o.prototype.resize=function(){if(this.$video){var e=this.$video[0].videoHeight,t=this.$video[0].videoWidth,o=this.$wrapper.height(),i=this.$wrapper.width();this.$video.css(i/t>o/e?{width:i+2,height:"auto"}:{width:"auto",height:o+2})}},o.prototype.destroy=function(){this.$element.off(i),this.$video&&this.$video.off(i),delete e[i].lookup[this.index],this.$element.removeData(i),this.$wrapper.remove()},e[i]={lookup:[]},e.fn[i]=function(t,s){var n;return this.each((function(){(n=e.data(this,i))&&n.destroy(),(n=new o(this,t,s)).index=e[i].lookup.push(n)-1,e.data(this,i,n)})),this},e(document).ready((function(){var t=e(window);t.on("resize."+i,(function(){for(var t,o=e[i].lookup.length,s=0;o>s;s++)(t=e[i].lookup[s])&&t.settings.resizing&&t.resize()})),t.on("unload."+i,(function(){return!1})),e(document).find("[data-vide-bg]").each((function(t,o){var s=e(o),n=s.data(i+"-options"),r=s.data(i+"-bg");s[i](r,n)}))}))}));